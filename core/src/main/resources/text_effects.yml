version: 1

# Text effect GLSL snippets used when generating text shaders.
# Each effect defines:
# - id: numeric effect id (0-7)
# - enabled: whether the effect is available
# - trigger_color: exact hex color the shader matches (optional, defaults to #FDxD00)
# - description: optional text shown in /oraxen texteffects
# - snippets: GLSL code for the effect (all values hardcoded, no variables)
#
# Usage in chat: <effect:wave>wavy text</effect>
#
# The trigger_color is matched exactly by the shader. All effect parameters
# (output color, speed, amplitude) are hardcoded in the snippets.
# This eliminates false positives where gradient colors triggered effects.

shared:
  # Shared GLSL helpers inserted before main() in fragment shaders.
  fragment_prelude: |
    // HSV to RGB conversion for rainbow effect
    vec3 hsv2rgb(vec3 c) {
        vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

effects:
  rainbow:
    id: 0
    enabled: true
    # trigger_color defaults to #FD0D00 (R=253, G=0x0D, B=0)
    description: Cycles through rainbow colors over time
    snippets:
      - fragment: |
          float hue = fract(charIndex * 0.03 + timeSeconds * 0.09);
          texColor.rgb = hsv2rgb(vec3(hue, 0.9, 1.0));

  wave:
    id: 1
    enabled: true
    # trigger_color defaults to #FD1D00 (R=253, G=0x1D, B=0)
    description: Vertical sine wave motion
    snippets:
      - fragment: |
          texColor.rgb = vec3(0.333, 0.804, 0.988);
      - vertex: |
          float phase = charIndex * 0.6 + timeSeconds * 6.0;
          pos.y += sin(phase) * 2.0;

  shake:
    id: 2
    enabled: true
    # trigger_color defaults to #FD2D00 (R=253, G=0x2D, B=0)
    description: Random jitter
    snippets:
      - fragment: |
          texColor.rgb = vec3(1.0, 0.42, 0.42);
      - vertex: |
          float seed = charIndex + floor(timeSeconds * 32.0);
          pos.x += (fract(sin(seed * 12.9898) * 43758.5453) - 0.5) * 1.5;
          pos.y += (fract(sin(seed * 78.233) * 43758.5453) - 0.5) * 1.5;

  pulse:
    id: 3
    enabled: true
    # trigger_color defaults to #FD3D00 (R=253, G=0x3D, B=0)
    description: Opacity fades in/out
    snippets:
      - fragment: |
          texColor.rgb = vec3(1.0, 0.85, 0.24);
          float pulse = (sin(timeSeconds * 1.5 + charIndex * 0.3) + 1.0) * 0.5;
          texColor.a *= 0.3 + pulse * 0.7;
